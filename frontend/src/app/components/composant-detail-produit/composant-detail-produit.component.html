<div class="detail-container">
  <ng-container *ngIf="produit$ | async as produit; else pasDeProduit">
    <mat-card [style.background-color]="obtenirCouleurNutriScore(produit)">
      <button mat-icon-button class="like-button-detail" 
              [class.liked]="isLiked" 
              (click)="toggleLike()"
              [attr.aria-label]="isLiked ? 'Retirer des favoris' : 'Ajouter aux favoris'">
        <span class="like-icon">{{ isLiked ? '‚ù§Ô∏è' : 'ü§ç' }}</span>
      </button>
      
      <mat-card-header>
        <mat-card-title>{{ produit.nom }}</mat-card-title>
        <mat-card-subtitle>{{ produit.marque }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p><strong>Calories:</strong> {{ produit.calories }} kcal</p>
        <p><strong>Prot√©ines:</strong> {{ produit.proteines }} g</p>
        <p><strong>Sucres:</strong> {{ produit.sucres }} g</p>
        <p><strong>Sel:</strong> {{ produit.sel }} g</p>
        <p><strong>Graisses satur√©es:</strong> {{ produit.graissesSaturees }} g</p>
        <p><strong>Fibres:</strong> {{ produit.fibres }} g</p>
        <p *ngIf="produit.scoreNutriScore !== undefined"><strong>NutriScore:</strong> {{ produit.scoreNutriScore }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" (click)="retournerALaListe()">Retour</button>
      </mat-card-actions>
    </mat-card>
  </ng-container>
  
  <ng-template #pasDeProduit>
    <mat-card class="error-card">
      <mat-card-content>
        <p>Produit non trouv√©.</p>
        <button mat-button color="primary" (click)="retournerALaListe()">Retour</button>
      </mat-card-content>
    </mat-card>
  </ng-template>
</div>